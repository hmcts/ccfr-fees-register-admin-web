{% from "includes/macros/form.njk" import errorSummary, textArea, textInput, radioGroup, submitButton, selectInline, selectReferenceData %}
  {% extends "layout.njk" %}

  {% set title = t('Create Fee | Fees Register Admin Console') %}
  {% set heading = t('Create Fee') %}

  {% block content %}

<div class="grid-row">
  <div class="column-full">
    <form method="post" action="create">
      <table id="create-fee-form-table">
        <tr>
          <td>{{ textInput(t('Fee Code*'), 'code', form) }}</td>

          <td>{{ textInput(t('Memo Line*'), 'memoLine', form) }}</td>

          <td>{{ textInput(t('Natural Account Code*'), 'naturalAccountCode', form) }}</td>

        </tr>

        <tr>
          <td colspan="3">
            {{ textArea(t('Description*'), 'description', form) }}
          </td>
        </tr>

        <tr>
          <td>

            {% set fromDateError = form.errorFor('fromDate') %}
            <div class="form-group {% if fromDateError %} form-group-error {% endif %}">
            <label class="form-label-bold" for="fromDate" id="fromDate[label]">From Date*</label>
            <input type="date" id="fromDate" class="form-control {% if fromDateError %} form-control-error {% endif %}"
                   name="fromDate"
                   value="{{ form.valueFor('fromDate') }}"/>
            </div>
          </td>

          <td>
            <div class="form-group">
            <label class="form-label-bold" for="toDate" id="toDate[label]">To Date</label>
            <input type="date" class="form-control"
                   id="toDate"
                   name="toDate"
                   value="{{ form.valueFor('toDate') }}"/>
            </div>
          </td>
        </tr>

        {% set isRanged = form.valueFor('type') == 'ranged' %}

        <tr>
          <td>
            {{ radioGroup(form = form, name = 'type', disabled = false, label = t('Type'), options = [
            { label: t('Fixed'), value: 'fixed', onclick: "disableRangedFees" },
            { label: t('Ranged'), value: 'ranged', onclick: "enableRangedFees" }
            ]) }}
          </td>

          <td>
            {{ textInput(t('From more than*'), 'fromRange', form, disabled = not isRanged) }}
            {{ textInput(t('Up to'), 'toRange', form, disabled = not isRanged) }}
          </td>

          <td>
            {{ selectReferenceData ('rangeUnit', referenceData.rangeUnits, form, 'Range Units*', disabled = not isRanged)
            }}
          </td>

        </tr>

        {% set isPercentage = form.valueFor('amountType') == 'percentage' %}

        <tr>
          <td rowspan="2">
            {{ radioGroup(form = form, name = 'amountType', disabled = false, label = t('Amount Type'), options = [
            { label: t('Flat'), value: 'flat' },
            { label: t('Percentage'), value: 'percentage' },
            { label: t('Volume'), value: 'volume' }
            ]) }}
          </td>

          <td>{{ textInput(t('Amount (Â£)*'), 'amount', form, disabled = isPercentage) }}</td>

        </tr>

        <tr>
          <td>{{ textInput(t('Percentage (%)*'), 'percentage', form, disabled = not isPercentage) }}</td>
        </tr>

        <tr>
          <td colspan="2">
              {{ selectReferenceData ('applicantType', referenceData.applicantTypes, form, 'Applicant type*') }}
          </td>
        </tr>

        <tr>
          <td colspan="2">
            {{ selectReferenceData ('jurisdiction1', referenceData.jurisdictions1, form, 'Jurisdiction 1*') }}
          </td>
        </tr>

        <tr>
          <td colspan="2">
            {{ selectReferenceData ('jurisdiction2', referenceData.jurisdictions2, form, 'Jurisdiction 2*') }}
          </td>
        </tr>


        <tr>
          <td colspan="2">
            {{ selectReferenceData ('service', referenceData.serviceTypes, form, 'Service*') }}
          </td>
        </tr>

        <tr>
          <td colspan="2">
            {{ selectReferenceData ('event', referenceData.eventTypes, form, 'Event*') }}
          </td>
        </tr>


        <tr>
          <td colspan="2">
            {{ selectReferenceData ('channel', referenceData.channelTypes, form, 'Channel*') }}
          </td>
        </tr>

        <tr>
          <td colspan="2">
            {{ selectReferenceData ('direction', referenceData.directionTypes, form, 'Direction*') }}
          </td>
        </tr>

        <tr>

          <td> {{ textInput(t('Fee Order Name*'), 'feeOrderName', form) }}</td>

          <td> {{ textInput(t('Statutory Instrument'), 'statutoryInstrument', form) }}</td>

          <td> {{ textInput(t('SI REF ID'), 'siRefId', form) }}</td>

        </tr>

      </table>

      {{ submitButton(t('Next')) }}
    </form>

    <a href="/admin/welcome" class="link-back">{{ t('Cancel') }}</a>
  </div>
</div>

  {% endblock %}
