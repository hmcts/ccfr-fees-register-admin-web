{% extends "layout.njk" %}

  {% set title = t('Fee | ' + serviceName) %}
  
  {% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <nav class="hmcts-sub-navigation" aria-label="Sub navigation">
      <div class="jui-width-container">
        <ul class="hmcts-sub-navigation__list">
          <li class="hmcts-sub-navigation__item">
            <a class="hmcts-sub-navigation__link" aria-current="page" href="/admin/V2/fee-details?feeCode={{ feeDto.code }}&pageType={{ pageType }}">
              Fee details
            </a>
          </li>
          <li class="hmcts-sub-navigation__item">
            <a class="hmcts-sub-navigation__link" href="#">
              Fee versions
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <h1 class="heading-xlarge margin-bottom-0">
            {{t('Fee details')}}
      </h1>
  </div>
</div>

<dl class="govuk-check-your-answers govuk-check-your-answers--short">
<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Code</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.code }}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">SI Ref ID</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.current_version.si_ref_id}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Service</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.service_type.name}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Event</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.event_type.name}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Description</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.current_version.direction}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Statutory Instrument</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.current_version.statutory_instrument}}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Fee Order Name</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.current_version.fee_order_name}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Jurisdiction 1</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.jurisdiction1.name}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Jurisdiction 2</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.jurisdiction2.name}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Fee type</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{ feeDto.fee_type}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Amount type</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
  {% if feeDto.current_version.flat_amount.amount %}
    Flat
  {% elif feeDto.current_version.percentage_amount.percentage %}
    percentage
  {% elif feeDto.current_version.volume_amount.amount %}
    Volume
  {% else %}
    &nbsp;
  {% endif %}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Amount</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
  {% if feeDto.current_version.flat_amount.amount %}
    {{feeDto.current_version.flat_amount.amount}}
  {% elif feeDto.current_version.volume_amount.amount %}
    {{feeDto.current_version.flat_amount.amount}}
  {% else %}
    &nbsp;
  {% endif %}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Percentage</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
  {% if feeDto.current_version.percentage_amount.percentage %}
    {{feeDto.current_version.percentage_amount.percentage}}
  {% else %}
    &nbsp;
  {% endif %}
  </dd>
</div>
 {% if feeDto.fee_type == 'ranged' %}

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Range from</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.min_range}}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Range to</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.max_range}}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Range units</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.range_unit}}
  </dd>
</div>
{% endif %}
 {% if feeDto.current_version.valid_from %}
<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Valid from</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
    {{feeDto.current_version.valid_from}}
  </dd>
</div>
{% endif %}
{% if feeDto.current_version.valid_to %}
<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Valid to</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.current_version.valid_to}}
  </dd>
</div>
{% endif %}

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Version</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.current_version.version}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Reason for fee update</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{% if feeDto.reason %}
  {{feeDto.reason}}
{% else %}
  &nbsp;
{% endif %}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Natural account code</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.current_version.natural_account_code}}
  </dd>
</div>


<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Memo</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.current_version.memo_line}}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Direction</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.current_version.direction}}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Applicant type</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.applicant_type.name}}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Keyword</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.keyword}}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Channel</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.channel_type.name}}
  </div>
</dd>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Status</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
{{feeDto.current_version.status}}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Editor</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
  {% if isEditor(user.allInfo.roles) %}
    {{user.allInfo.forename}} {{user.allInfo.surname}}
  {% else %}
  &nbsp;
  {% endif %}
  </dd>
</div>

<div class="govuk-check-your-answers__contents">
  <dt class="govuk-check-your-answers__question">
    <label class="bold">Approver</label> 
  </dt>
  <dd class="govuk-check-your-answers__answer">
  {% if isApprover(user.allInfo.roles) %}
  {{user.allInfo.forename}} {{user.allInfo.surname}}
  {% else %}
  &nbsp;
  {% endif %}
  </dd>
</div>
</dl>

  {% if not isDraftVersionExists(feeDto) %}
    {% if isEditor(user.allInfo.roles) %}

      {% if feeDto.current_version.flat_amount.amount %}
      {% set type = 'flat' %}
      {% elif feeDto.current_version.percentage_amount.percentage %}
      {% set type = 'percentage' %}
      {% elif feeDto.current_version.volume_amount.volume %}
      {% set type = 'volume' %}
      {% endif %}
      <a href="/admin/v2/fees/version/create/{{ feeDto.code }}?type={{ type }}" class="custom-button btn">
        Edit fee
      </a>
    {% endif %}
  {% endif %}
  {% endblock %}
